# デバッグ機能の使い方

## 概要

開発・テスト用のデバッグ機能が実装されています。これらの機能は `GameConfig.DEBUG_MODE` が `true` の時のみ有効になります。

## デバッグメニューの使い方

### アクセス方法

1. メイン画面（ホーム画面）を開く
2. 画面右下の「デバッグ」ボタンをクリック
3. デバッグメニューが表示される

### 機能一覧

#### 1. ステージ移動

- **機能**: 任意のステージに直接移動できます
- **使い方**: 
  - デバッグメニューの「ステージ移動」セクションで1-20のボタンをクリック
  - 選択したステージに即座に移動します
- **用途**: 
  - 特定のステージのテストを行いたい場合
  - 後半ステージの動作確認
  - 妨害ブロックの動作テスト

#### 2. ゴールド追加

- **機能**: 指定した金額のゴールドを追加できます
- **使い方**:
  - デバッグメニューの「ゴールド追加」セクションで金額ボタンをクリック
  - +100G, +500G, +1000G, +5000G から選択可能
- **用途**:
  - ガチャのテスト
  - アイテム購入のテスト
  - 高額ガチャの動作確認

### デバッグメニューの操作

- **閉じる**: 「閉じる」ボタンまたは背景をクリックでメニューを閉じる
- **自動更新**: ステージ移動やゴールド追加後は画面が自動的に更新される

## キーボードショートカット

### Dキー: デバッグライン表示切り替え

- **機能**: 画面上のデバッグライン（エリア境界線）の表示/非表示を切り替え
- **使い方**: ゲーム中に「D」キーを押す
- **用途**: レイアウトの確認、UI要素の配置確認

### Shift+Dキー: デバッグ情報出力

- **機能**: 現在のシーンのデバッグ情報をコンソールに出力
- **使い方**: ゲーム中に「Shift + D」キーを押す
- **出力内容**:
  - 現在のシーン名
  - FPS情報
  - オブジェクト数
  - その他のデバッグ情報

### Bキー: ブロック状態出力（ゲーム画面のみ）

- **機能**: 現在の盤面状態をアスキーアートでコンソールに出力
- **使い方**: ゲーム画面で「B」キーを押す
- **用途**: ブロック配置の確認、バグの調査

## 注意事項

### 本番環境での無効化

- `GameConfig.DEBUG_MODE` を `false` に設定すると、すべてのデバッグ機能が無効になります
- 本番リリース前には必ず `DEBUG_MODE` を `false` に設定してください

### パフォーマンスへの影響

- デバッグライン表示は軽微なパフォーマンス影響があります
- 大量のデバッグ出力はコンソールのパフォーマンスに影響する可能性があります

### データの永続化

- デバッグで変更したステージやゴールドは、ページリロード時にリセットされます
- これは仕様通りの動作です（完全リセット方式）

## 開発時の活用例

### 1. 新ステージのテスト

```
1. デバッグメニューでテスト対象のステージに移動
2. ゲームプレイでステージの動作を確認
3. 必要に応じてゴールドを追加してアイテムをテスト
```

### 2. ガチャシステムのテスト

```
1. デバッグメニューで大量のゴールドを追加
2. ガチャを複数回実行して確率や動作を確認
3. 獲得したアイテムでゲームプレイをテスト
```

### 3. UI/レイアウトの確認

```
1. 各画面で「D」キーを押してデバッグラインを表示
2. エリア境界を確認してレイアウトの問題を特定
3. 必要に応じてCSS/座標を調整
```

### 4. バグ調査

```
1. 問題が発生したステージに直接移動
2. 「B」キーでブロック状態を確認
3. 「Shift+D」キーでデバッグ情報を出力
4. コンソールログを確認して問題を特定
```

## トラブルシューティング

### デバッグボタンが表示されない

- `GameConfig.DEBUG_MODE` が `true` に設定されているか確認
- ブラウザのキャッシュをクリアして再読み込み

### キーボードショートカットが効かない

- ゲーム画面にフォーカスがあることを確認
- ブラウザの開発者ツールが開いていないか確認

### デバッグメニューが正常に動作しない

- ブラウザのコンソールでエラーが出ていないか確認
- ページを再読み込みして再試行
